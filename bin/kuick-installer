#!/usr/bin/env php
<?php

/**
 * Kuick Framework (https://github.com/milejko/kuick-framework)
 *
 * @link       https://github.com/milejko/kuick-framework
 * @copyright  Copyright (c) 2010-2025 Mariusz MiÅ‚ejko (mariusz@milejko.pl)
 * @license    https://github.com/milejko/kuick-framework?tab=MIT-1-ov-file#readme New BSD License
 */

namespace Kuick\Framework\Installer;

$fileMap = [
    'public/index.php' => 'vendor/kuick/framework/app/public/index.php',
    'bin/console' => 'vendor/kuick/framework/app/bin/console',
    'config/di/app.di.php' => 'vendor/kuick/framework/app/config/di/app.di.php',
    'config/di/app.di@dev.php' => 'vendor/kuick/framework/app/config/di/app.di@dev.php',
    'config/app.commands.php' => 'vendor/kuick/framework/app/config/app.commands.php',
    'config/app.guards.php' => 'vendor/kuick/framework/app/config/app.guards.php',
    'config/app.listeners.php' => 'vendor/kuick/framework/app/config/app.listeners.php',
    'config/app.middlewares.php' => 'vendor/kuick/framework/app/config/app.middlewares.php',
    'config/app.routes.php' => 'vendor/kuick/framework/app/config/app.routes.php',
];

foreach (array_keys($fileMap) as $file) {
    if (file_exists($file)) {
        echo 'Skipping install: ' . $file . ' - file already exists' . PHP_EOL;
        exit;
    }
}
foreach ($fileMap as $target => $source) {
    $dir = dirname($target);
    if (!is_dir($dir)) {
        mkdir($dir, 0777, true);
    }
    copy($source, $target);
    echo 'Installed: ' . $source . PHP_EOL;
}
chmod('bin/console', 0755);
